{"config":{},"extra":{"0246.VERSION":[0,0,4],"workspace_info":{"id":"f6ce7d15-2ce8-4f49-a77d-dc5430bbc44e"}},"groups":[{"bounding":[-436,-377,1800,133],"color":"#ff0000","font_size":100,"locked":false,"title":"https://www.youtube.com/@stephantual"},{"bounding":[-436,-788,1879,237],"color":"#ff0000","font_size":200,"locked":false,"title":"URSIUM.AI - CC-BY"},{"bounding":[-437,-536,1823,148],"color":"#ff0000","font_size":100,"locked":false,"title":"SUPIR V2 - Default Workflow (Update3)"},{"bounding":[1249,-199,3775,2999],"color":"#b06634","font_size":24,"locked":false,"title":"Stage 1"},{"bounding":[5866,-31,5232,1776],"color":"#b06634","font_size":24,"locked":false,"title":"Stage 2"}],"last_link_id":159,"last_node_id":147,"links":[[27,24,0,25,0,"UPSCALE_MODEL"],[28,13,0,25,1,"IMAGE"],[29,25,0,18,0,"IMAGE"],[68,57,0,36,0,"IMAGE"],[75,35,0,59,1,"IMAGE"],[85,13,0,66,0,"*"],[86,67,0,57,0,"IMAGE"],[87,68,0,35,0,"IMAGE"],[92,72,2,73,2,"VAE"],[93,73,0,60,0,"SUPIRMODEL"],[96,72,1,75,1,"CLIP"],[97,75,0,73,0,"MODEL"],[98,75,1,73,1,"CLIP"],[102,73,1,81,0,"SUPIRVAE"],[104,81,1,83,0,"*"],[106,84,0,85,1,"IMAGE"],[107,81,0,86,0,"*"],[109,87,0,85,0,"SUPIRVAE"],[110,62,0,88,0,"SUPIRMODEL"],[113,18,0,90,0,"*"],[114,91,0,81,1,"IMAGE"],[119,79,0,100,0,"IMAGE"],[120,92,0,100,1,"IMAGE"],[121,61,0,102,0,"SUPIRMODEL"],[122,88,0,102,2,"SUPIR_cond_pos"],[123,88,1,102,3,"SUPIR_cond_neg"],[124,65,0,107,0,"SUPIRVAE"],[125,107,0,57,1,"IMAGE"],[127,102,0,107,1,"LATENT"],[128,81,2,109,0,"*"],[129,110,0,88,1,"LATENT"],[130,85,0,102,1,"LATENT"],[131,13,0,114,0,"IMAGE"],[134,114,0,121,0,"INT,FLOAT"],[136,114,1,122,0,"INT,FLOAT"],[138,121,0,18,1,"INT"],[139,122,0,18,2,"INT"],[142,36,0,130,0,"IMAGE"],[143,130,0,59,0,"IMAGE"],[144,13,0,132,0,"IMAGE"],[146,132,0,136,0,"*"],[147,137,0,88,3,"STRING"],[148,130,0,138,0,"IMAGE"],[151,130,0,141,0,"*"],[154,74,0,75,2,"LORA_STACK"],[155,72,0,75,0,"MODEL"],[156,35,0,145,0,"IMAGE"],[157,36,0,146,0,"IMAGE"],[158,147,0,122,1,"INT,FLOAT"],[159,147,0,121,1,"INT,FLOAT"]],"nodes":[{"flags":{"collapsed":true},"id":67,"mode":0,"order":0,"outputs":[{"label":"IMAGE","links":[86],"name":"IMAGE","slot_index":0,"type":"IMAGE"}],"pos":[7083.247376758138,81.00244533398647],"properties":{},"size":{"0":210,"1":58},"title":"Get_BASE_IMAGE","type":"GetNode","widgets_values":["BASE_IMAGE"]},{"flags":{"collapsed":true},"id":68,"mode":0,"order":1,"outputs":[{"label":"IMAGE","links":[87],"name":"IMAGE","slot_index":0,"type":"IMAGE"}],"pos":[7605.247376758138,873.0024453339865],"properties":{},"size":{"0":210,"1":58},"title":"Get_BASE_IMAGE","type":"GetNode","widgets_values":["BASE_IMAGE"]},{"flags":{},"id":25,"inputs":[{"label":"upscale_model","link":27,"name":"upscale_model","type":"UPSCALE_MODEL"},{"label":"image","link":28,"name":"image","type":"IMAGE"}],"mode":4,"order":48,"outputs":[{"label":"IMAGE","links":[29],"name":"IMAGE","shape":3,"slot_index":0,"type":"IMAGE"}],"pos":[2178.3329726197876,1300.8095975227388],"properties":{"Node name for S&R":"ImageUpscaleWithModel"},"size":{"0":241.79998779296875,"1":46},"type":"ImageUpscaleWithModel"},{"bgcolor":"#653","color":"#432","flags":{},"id":76,"mode":0,"order":2,"pos":[2168.3329726197876,1150.8095975227388],"properties":{"text":""},"size":{"0":300,"1":60},"type":"Note","widgets_values":["Upscaling is NOT what SUPIR does. It's primarily a very good controlnet. Use the upscaler of your choice, or just resize the image."]},{"flags":{"collapsed":true},"id":84,"mode":0,"order":3,"outputs":[{"label":"IMAGE","links":[106],"name":"IMAGE","slot_index":0,"type":"IMAGE"}],"pos":[5703.310524530062,246.410619138946],"properties":{},"size":{"0":210,"1":58},"title":"Get_DENOISED_IMG","type":"GetNode","widgets_values":["DENOISED_IMG"]},{"flags":{"collapsed":true},"id":87,"mode":0,"order":4,"outputs":[{"label":"SUPIRVAE","links":[109],"name":"SUPIRVAE","slot_index":0,"type":"SUPIRVAE"}],"pos":[5683.310524530062,106.410619138946],"properties":{},"size":{"0":210,"1":58},"title":"Get_SUPIR_VAE_DENOISED","type":"GetNode","widgets_values":["SUPIR_VAE_DENOISED"]},{"flags":{"collapsed":true},"id":60,"inputs":[{"label":"SUPIRMODEL","link":93,"name":"SUPIRMODEL","type":"SUPIRMODEL"}],"mode":0,"order":57,"outputs":[{"label":"*","links":null,"name":"*","type":"*"}],"pos":[3068.332972619787,120.80959752273918],"properties":{"previousName":"SUPIR_MODEL_CHAIN"},"size":{"0":210,"1":58},"title":"Set_SUPIR_MODEL_CHAIN","type":"SetNode","widgets_values":["SUPIR_MODEL_CHAIN"]},{"flags":{"collapsed":true},"id":91,"mode":0,"order":5,"outputs":[{"label":"IMAGE","links":[114],"name":"IMAGE","slot_index":0,"type":"IMAGE"}],"pos":[2958.332972619787,420.8095975227392],"properties":{},"size":{"0":210,"1":58},"title":"Get_UPSCALED_IMG","type":"GetNode","widgets_values":["UPSCALED_IMG"]},{"bgcolor":"#653","color":"#432","flags":{},"id":93,"mode":0,"order":6,"pos":[2668.332972619787,960.8095975227396],"properties":{"text":""},"size":{"0":210,"1":58},"type":"Note","widgets_values":["SUPIR nodes were updated to NOT have to use a 64x multiplier, use whatever you want, but remember: more pixels == slower"]},{"flags":{},"id":98,"inputs":[],"mode":0,"order":7,"outputs":[],"pos":{"0":5978.32861328125,"1":-146.1632537841797,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"properties":{},"size":{"0":210,"1":62},"type":"Bookmark (rgthree)","widgets_values":["4",1]},{"flags":{},"id":95,"inputs":[],"mode":0,"order":8,"outputs":[],"pos":{"0":340,"1":1030,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"properties":{},"size":{"0":210,"1":62},"type":"Bookmark (rgthree)","widgets_values":["1",1]},{"bgcolor":"#653","color":"#432","flags":{},"id":89,"mode":0,"order":9,"pos":[3778.332972619787,870.8095975227393],"properties":{"text":""},"size":{"0":510,"1":80},"type":"Note","widgets_values":["A quick intermediary step to makes ure the upscaler model didn't ruin the image!\nNote that your browser is displaying a rescaled image, if you want better results use faststone image viewer, it's freeware and pixel-accurate."]},{"flags":{},"id":97,"inputs":[],"mode":0,"order":10,"outputs":[],"pos":{"0":3608.3330078125,"1":760.8098754882812,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"properties":{},"size":{"0":210,"1":62},"type":"Bookmark (rgthree)","widgets_values":["3",1]},{"flags":{"collapsed":true},"id":61,"mode":0,"order":11,"outputs":[{"label":"SUPIRMODEL","links":[121],"name":"SUPIRMODEL","slot_index":0,"type":"SUPIRMODEL"}],"pos":[6133.310524530062,356.4106191389461],"properties":{},"size":{"0":210,"1":58},"title":"Get_SUPIR_MODEL_CHAIN","type":"GetNode","widgets_values":["SUPIR_MODEL_CHAIN"]},{"bgcolor":"#653","color":"#432","flags":{},"id":105,"mode":0,"order":12,"pos":[2678.332972619787,310.8095975227392],"properties":{"text":""},"size":{"0":260,"1":60},"type":"Note","widgets_values":["If you are very low vRam, use FP8 precision unet, the quality will be degraded however (but not by much)"]},{"flags":{},"id":107,"inputs":[{"label":"SUPIR_VAE","link":124,"name":"SUPIR_VAE","type":"SUPIRVAE"},{"label":"latents","link":127,"name":"latents","type":"LATENT"}],"mode":0,"order":55,"outputs":[{"label":"image","links":[125],"name":"image","shape":3,"slot_index":0,"type":"IMAGE"}],"pos":[6763.310524530062,126.41061913894609],"properties":{"Node name for S&R":"SUPIR_decode"},"size":{"0":315,"1":102},"type":"SUPIR_decode","widgets_values":[true,512]},{"flags":{},"id":57,"inputs":[{"label":"image_ref","link":86,"name":"image_ref","type":"IMAGE"},{"label":"image_target","link":125,"name":"image_target","type":"IMAGE"}],"mode":0,"order":59,"outputs":[{"label":"image","links":[68],"name":"image","shape":3,"slot_index":0,"type":"IMAGE"}],"pos":[7413.310524530062,226.41061913894606],"properties":{"Node name for S&R":"ColorMatch"},"size":{"0":315,"1":78},"type":"ColorMatch","widgets_values":["mkl"]},{"bgcolor":"#653","color":"#432","flags":{},"id":108,"mode":0,"order":13,"pos":[7437.563637428462,90.23617384002593],"properties":{"text":""},"size":{"0":210,"1":58},"type":"Note","widgets_values":["Color matching can sometimes yield slight better results"]},{"flags":{},"id":35,"inputs":[{"label":"image","link":87,"name":"image","type":"IMAGE"}],"mode":4,"order":40,"outputs":[{"label":"IMAGE","links":[75,156],"name":"IMAGE","shape":3,"slot_index":0,"type":"IMAGE"},{"label":"show_help","links":null,"name":"show_help","shape":3,"type":"STRING"}],"pos":[7839.247376758138,837.0024453339865],"properties":{"Node name for S&R":"CR Simple Text Watermark"},"size":{"0":360,"1":300},"type":"CR Simple Text Watermark","widgets_values":["ORIGINAL","bottom right",0.3,"AlumniSansCollegiateOne-Regular.ttf",50,"custom",20,20,"#000000"]},{"flags":{"collapsed":true},"id":62,"mode":0,"order":14,"outputs":[{"label":"SUPIRMODEL","links":[110],"name":"SUPIRMODEL","slot_index":0,"type":"SUPIRMODEL"}],"pos":[5673.310524530062,626.4106191389457],"properties":{},"size":{"0":210,"1":58},"title":"Get_SUPIR_MODEL_CHAIN","type":"GetNode","widgets_values":["SUPIR_MODEL_CHAIN"]},{"flags":{"collapsed":true},"id":83,"inputs":[{"label":"IMAGE","link":104,"name":"IMAGE","type":"IMAGE"}],"mode":0,"order":62,"outputs":[{"label":"*","links":null,"name":"*","type":"*"}],"pos":[3618.332972619787,410.8095975227391],"properties":{"previousName":"DENOISED_IMG"},"size":{"0":210,"1":58},"title":"Set_DENOISED_IMG","type":"SetNode","widgets_values":["DENOISED_IMG"]},{"flags":{},"id":81,"inputs":[{"label":"SUPIR_VAE","link":102,"name":"SUPIR_VAE","type":"SUPIRVAE"},{"label":"image","link":114,"name":"image","type":"IMAGE"}],"mode":0,"order":58,"outputs":[{"label":"SUPIR_VAE","links":[107],"name":"SUPIR_VAE","shape":3,"slot_index":0,"type":"SUPIRVAE"},{"label":"denoised_image","links":[104],"name":"denoised_image","shape":3,"slot_index":1,"type":"IMAGE"},{"label":"denoised_latents","links":[128],"name":"denoised_latents","shape":3,"slot_index":2,"type":"LATENT"}],"pos":[3188.332972619787,360.8095975227393],"properties":{"Node name for S&R":"SUPIR_first_stage"},"size":{"0":330,"1":170},"type":"SUPIR_first_stage","widgets_values":[true,512,512,"auto"]},{"flags":{"collapsed":true},"id":109,"inputs":[{"label":"LATENT","link":128,"name":"LATENT","type":"LATENT"}],"mode":0,"order":63,"outputs":[{"label":"*","links":null,"name":"*","type":"*"}],"pos":[3588.332972619787,460.809597522739],"properties":{"previousName":"DENOISED_LATENTS"},"size":{"0":210,"1":58},"title":"Set_DENOISED_LATENTS","type":"SetNode","widgets_values":["DENOISED_LATENTS"]},{"flags":{"collapsed":true},"id":110,"mode":0,"order":15,"outputs":[{"label":"LATENT","links":[129],"name":"LATENT","slot_index":0,"type":"LATENT"}],"pos":[5663.310524530062,706.4106191389457],"properties":{},"size":{"0":210,"1":58},"title":"Get_DENOISED_LATENTS","type":"GetNode","widgets_values":["DENOISED_LATENTS"]},{"flags":{},"id":85,"inputs":[{"label":"SUPIR_VAE","link":109,"name":"SUPIR_VAE","type":"SUPIRVAE"},{"label":"image","link":106,"name":"image","type":"IMAGE"}],"mode":0,"order":41,"outputs":[{"label":"latent","links":[130],"name":"latent","shape":3,"slot_index":0,"type":"LATENT"}],"pos":[5963.310524530062,166.41061913894606],"properties":{"Node name for S&R":"SUPIR_encode"},"size":{"0":315,"1":126},"type":"SUPIR_encode","widgets_values":[true,512,"auto"]},{"bgcolor":"#653","color":"#432","flags":{},"id":113,"mode":0,"order":16,"pos":[2648.332972619787,1350.8095975227388],"properties":{"text":""},"size":{"0":270,"1":110},"type":"Note","widgets_values":["Usual ARs:\n16:9\n1280x720  (720p)\n1920x1080 (1080p)\n3840ï¿½2160 (4k)\n5120x2880 (5k)"]},{"flags":{},"id":18,"inputs":[{"label":"image","link":29,"name":"image","type":"IMAGE"},{"label":"width","link":138,"name":"width","type":"INT","widget":{"name":"width"}},{"label":"height","link":139,"name":"height","type":"INT","widget":{"name":"height"}}],"mode":0,"order":56,"outputs":[{"label":"IMAGE","links":[113],"name":"IMAGE","shape":3,"slot_index":0,"type":"IMAGE"},{"label":"width","links":null,"name":"width","shape":3,"type":"INT"},{"label":"height","links":[],"name":"height","shape":3,"type":"INT"}],"pos":[2608.332972619787,1090.8095975227388],"properties":{"Node name for S&R":"ImageResize+"},"size":{"0":324,"1":218},"type":"ImageResize+","widgets_values":[5120,2880,"lanczos",false,"always"]},{"flags":{},"id":114,"inputs":[{"label":"image","link":131,"name":"image","type":"IMAGE"}],"mode":0,"order":45,"outputs":[{"label":"width","links":[134],"name":"width","shape":3,"slot_index":0,"type":"INT"},{"label":"height","links":[136],"name":"height","shape":3,"slot_index":1,"type":"INT"}],"pos":[2367.332972619787,1732.8095975227388],"properties":{"Node name for S&R":"GetImageSize+"},"size":{"0":210,"1":46},"type":"GetImageSize+"},{"flags":{},"id":121,"inputs":[{"label":"a","link":134,"name":"a","type":"INT,FLOAT"},{"label":"b","link":159,"name":"b","type":"INT,FLOAT"}],"mode":0,"order":51,"outputs":[{"label":"INT","links":[138],"name":"INT","shape":3,"slot_index":0,"type":"INT"},{"label":"FLOAT","links":null,"name":"FLOAT","shape":3,"type":"FLOAT"}],"pos":[2810.332972619787,1639.8095975227388],"properties":{"Node name for S&R":"SimpleMath+"},"size":{"0":315,"1":78},"title":"Width Calculator","type":"SimpleMath+","widgets_values":["a*b"]},{"bgcolor":"#653","color":"#432","flags":{},"id":101,"mode":0,"order":17,"pos":[5963.310524530062,546.4106191389457],"properties":{"text":""},"size":{"0":250,"1":60},"type":"Note","widgets_values":["This is your \"prompt\" - try changing the image by upping the CFG! ALWAYS test your prompts and models separately!"]},{"bgcolor":"#653","color":"#432","flags":{},"id":82,"mode":0,"order":18,"pos":[1788.3329726197876,315.8095975227392],"properties":{"text":""},"size":{"0":240,"1":80},"type":"Note","widgets_values":["You can now add LORAs! Experiment with add_detail for example, or better faces perhaps!"]},{"flags":{"collapsed":true},"id":86,"inputs":[{"label":"SUPIRVAE","link":107,"name":"SUPIRVAE","type":"SUPIRVAE"}],"mode":0,"order":61,"outputs":[{"label":"*","links":null,"name":"*","type":"*"}],"pos":[3585.332972619787,357.8095975227393],"properties":{"previousName":"SUPIR_VAE_DENOISED"},"size":{"0":210,"1":58},"title":"Set_SUPIR_VAE_DENOISED","type":"SetNode","widgets_values":["SUPIR_VAE_DENOISED"]},{"bgcolor":"#653","color":"#432","flags":{},"id":103,"mode":0,"order":19,"pos":[6473.310524530062,306.4106191389461],"properties":{"text":""},"size":{"0":470,"1":90},"type":"Note","widgets_values":["This works like a ksampler, but denoise is a not a setting. To get 'creative' output, lower the controlnet scale and/or increase the restoration scale. This can also be very useful to 'fix' damaged images at the cost of accuracy"]},{"bgcolor":"#653","color":"#432","flags":{},"id":99,"mode":0,"order":20,"pos":[630,1080],"properties":{"text":""},"size":{"0":310,"1":150},"type":"Note","widgets_values":["The v2 nodes allow you to save a lot of time by upscaling/denoising the image first THEN passing it to supir with modified parameters! It's a useful way to iterate on SUPIR settings (only disable stage 2 to run stage 1, it doesn't work the other way around, evidently)"]},{"flags":{},"id":100,"inputs":[{"dir":3,"label":"image_a","link":119,"name":"image_a","type":"IMAGE"},{"dir":3,"label":"image_b","link":120,"name":"image_b","type":"IMAGE"}],"mode":0,"order":42,"outputs":[],"pos":{"0":3565.3330078125,"1":1267.809814453125,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"properties":{"comparer_mode":"Slide"},"size":{"0":1220,"1":1070},"title":"Upscale Compare","type":"Image Comparer (rgthree)","widgets_values":[["https://flowt.nyc3.digitaloceanspaces.com/outputs/18f7ab75-c024-4efb-9ebc-a3eece2e2181/01HVC799DSPNZ7ZGAC581WV159/rgthree.compare._temp_rezno_00001_.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=DO00RK8J3E4KLEPV2TLT%2F20240413%2Fnyc3%2Fs3%2Faws4_request&X-Amz-Date=20240413T171507Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=c68ef97a089cf77046e7dbe13867d758594d7c4d850bb021309c2d9b08d20b9e","https://flowt.nyc3.digitaloceanspaces.com/outputs/18f7ab75-c024-4efb-9ebc-a3eece2e2181/01HVC799DSPNZ7ZGAC581WV159/rgthree.compare._temp_rezno_00002_.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=DO00RK8J3E4KLEPV2TLT%2F20240413%2Fnyc3%2Fs3%2Faws4_request&X-Amz-Date=20240413T171507Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=03a0bd480c3e9a5a6d68347b033b07e5b18741533ac5d4c74fbdcae6c088eed5"]]},{"flags":{"collapsed":true},"id":92,"mode":0,"order":21,"outputs":[{"label":"IMAGE","links":[120],"name":"IMAGE","slot_index":0,"type":"IMAGE"}],"pos":[3290.332972619787,1335.8095975227388],"properties":{},"size":{"0":210,"1":58},"title":"Get_UPSCALED_IMG","type":"GetNode","widgets_values":["UPSCALED_IMG"]},{"flags":{"collapsed":true},"id":79,"mode":0,"order":22,"outputs":[{"label":"IMAGE","links":[119],"name":"IMAGE","slot_index":0,"type":"IMAGE"}],"pos":[3305.332972619787,1256.8095975227388],"properties":{},"size":{"0":210,"1":58},"title":"Get_BASE_IMAGE","type":"GetNode","widgets_values":["BASE_IMAGE"]},{"flags":{"collapsed":true},"id":66,"inputs":[{"label":"IMAGE","link":85,"name":"IMAGE","type":"IMAGE"}],"mode":0,"order":44,"outputs":[{"label":"*","links":null,"name":"*","type":"*"}],"pos":[2130.3329726197876,1572.8095975227388],"properties":{"previousName":"BASE_IMAGE"},"size":{"0":210,"1":58},"title":"Set_BASE_IMAGE","type":"SetNode","widgets_values":["BASE_IMAGE"]},{"flags":{"collapsed":true},"id":90,"inputs":[{"label":"IMAGE","link":113,"name":"IMAGE","type":"IMAGE"}],"mode":0,"order":60,"outputs":[{"label":"*","links":null,"name":"*","type":"*"}],"pos":[3028.332972619787,1160.8095975227388],"properties":{"previousName":"UPSCALED_IMG"},"size":{"0":210,"1":58},"title":"Set_UPSCALED_IMG","type":"SetNode","widgets_values":["UPSCALED_IMG"]},{"flags":{},"id":122,"inputs":[{"label":"a","link":136,"name":"a","type":"INT,FLOAT"},{"label":"b","link":158,"name":"b","type":"INT,FLOAT"}],"mode":0,"order":52,"outputs":[{"label":"INT","links":[139],"name":"INT","shape":3,"slot_index":0,"type":"INT"},{"label":"FLOAT","links":null,"name":"FLOAT","shape":3,"type":"FLOAT"}],"pos":[2797.332972619787,1784.8095975227388],"properties":{"Node name for S&R":"SimpleMath+"},"size":{"0":315,"1":78},"title":"Height Calculator","type":"SimpleMath+","widgets_values":["a*b"]},{"flags":{},"id":94,"inputs":[],"mode":0,"order":23,"outputs":[{"label":"OPT_CONNECTION","links":null,"name":"OPT_CONNECTION","type":"*"}],"pos":{"0":660,"1":1290,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"properties":{"customSortAlphabet":"","matchColors":"brown","matchTitle":"","showNav":true,"sort":"position","toggleRestriction":"default"},"size":{"0":260,"1":110},"title":"Stages","type":"Fast Groups Bypasser (rgthree)"},{"flags":{"collapsed":true},"id":136,"inputs":[{"label":"STRING","link":146,"name":"STRING","type":"STRING"}],"mode":0,"order":53,"outputs":[{"label":"*","links":null,"name":"*","type":"*"}],"pos":[2608.332972619787,760.8095975227394],"properties":{"previousName":"tagged_pos"},"size":{"0":210,"1":58},"title":"Set_tagged_pos","type":"SetNode","widgets_values":["tagged_pos"]},{"bgcolor":"#653","color":"#432","flags":{},"id":106,"mode":0,"order":24,"pos":[1288.3329726197876,-9.190402477260896],"properties":{"text":""},"size":{"0":750,"1":100},"type":"Note","widgets_values":["SDXL only - You can now use Lightning, which speeds sampling up considerably - test the model of your choice first however as evidenlty the quality of the output is directly correlated to the model you select based on your subject. If you want to upscale Anime, consider using APISR as its controlnet might be more suitable. \nALWAYS TEST YOUR MODELS WITH A HIGH CFG AND LOW CN VALUES TO MAKE SURE THE MODEL IS WORKING WITH SUPIR"]},{"flags":{"collapsed":true},"id":137,"mode":0,"order":25,"outputs":[{"label":"STRING","links":[147],"name":"STRING","slot_index":0,"type":"STRING"}],"pos":[5700,820],"properties":{},"size":{"0":210,"1":58},"title":"Get_tagged_pos","type":"GetNode","widgets_values":["tagged_pos"]},{"flags":{},"id":88,"inputs":[{"label":"SUPIR_model","link":110,"name":"SUPIR_model","type":"SUPIRMODEL"},{"label":"latents","link":129,"name":"latents","type":"LATENT"},{"label":"captions","link":null,"name":"captions","type":"STRING","widget":{"name":"captions"}},{"label":"positive_prompt","link":147,"name":"positive_prompt","type":"STRING","widget":{"name":"positive_prompt"}}],"mode":0,"order":43,"outputs":[{"label":"positive","links":[122],"name":"positive","shape":3,"slot_index":0,"type":"SUPIR_cond_pos"},{"label":"negative","links":[123],"name":"negative","shape":3,"slot_index":1,"type":"SUPIR_cond_neg"}],"pos":[5953.310524530062,666.4106191389457],"properties":{"Node name for S&R":"SUPIR_conditioner"},"size":{"0":400,"1":200},"type":"SUPIR_conditioner","widgets_values":["a man dressed in an amusing outfit, highly detailed, 4k","bad quality, blurry, messy",""]},{"flags":{},"id":59,"inputs":[{"dir":3,"label":"image_a","link":143,"name":"image_a","type":"IMAGE"},{"dir":3,"label":"image_b","link":75,"name":"image_b","type":"IMAGE"}],"mode":0,"order":67,"outputs":[],"pos":{"0":9040,"1":50,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"properties":{"comparer_mode":"Slide"},"size":{"0":1962,"1":1638},"type":"Image Comparer (rgthree)","widgets_values":[["https://flowt.nyc3.digitaloceanspaces.com/outputs/18f7ab75-c024-4efb-9ebc-a3eece2e2181/01HVC7CBYQ9EZX2MFFRHG0QX79/rgthree.compare._temp_hdept_00001_.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=DO00RK8J3E4KLEPV2TLT%2F20240413%2Fnyc3%2Fs3%2Faws4_request&X-Amz-Date=20240413T171649Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=759b7baca31f0a6c28d8f8177fb760d5f47983a97c57e9031e3c982b24b8fcd2","https://flowt.nyc3.digitaloceanspaces.com/outputs/18f7ab75-c024-4efb-9ebc-a3eece2e2181/01HVC7CBYQ9EZX2MFFRHG0QX79/rgthree.compare._temp_hdept_00002_.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=DO00RK8J3E4KLEPV2TLT%2F20240413%2Fnyc3%2Fs3%2Faws4_request&X-Amz-Date=20240413T171649Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=502055fa7d266b81215b41b321a94e99ee976c0fc4fc25ad9f148753b62d2f1b"]]},{"flags":{},"id":96,"inputs":[],"mode":0,"order":26,"outputs":[],"pos":{"0":2010,"1":1800,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"properties":{},"size":{"0":210,"1":62},"type":"Bookmark (rgthree)","widgets_values":["2",2]},{"bgcolor":"#653","color":"#432","flags":{},"id":104,"mode":0,"order":27,"pos":[6913.310524530062,636.4106191389457],"properties":{"text":""},"size":{"0":410,"1":390},"type":"Note","widgets_values":["Match the steps and CFG to what is expected of your checkpoint like any other sampler.\n\nfor the 'red car' example, use a higher cfg than normal\n\nfor any other image, remember you have to change the settings per image. There is no 'one size fits all'\n\nUse -1 to disable restoration. Max is 20. \n\nDMPPP_ETA and s (sigma) noise help create variations at low controlnet values, and/or can be used to simulate focus depth (see https://sandner.art/sigma-and-eta-noise-image-variations-in-latent-space-and-fast-detail-effects/)\n\nAnything below 0.5 for cfg will start showing more of the underlying model. Fun for creative work, but can look strage.\n\nKeep the model in memory if you are batching many images\n\nUsed the tiled sampler and set the tite size to the highest your vRam will allow, and reduce it according if you are low vRAM (8gb or less)\n\nfor higher denoise just leave the CN very low (at 0.1 it hallucinates)"]},{"flags":{"collapsed":true},"id":141,"inputs":[{"label":"any","link":151,"name":"any","type":"*"}],"mode":0,"order":69,"outputs":[{"label":"*","links":null,"name":"*","shape":6,"type":"*"}],"pos":[8770,440],"properties":{"Node name for S&R":"PlaySound|pysssss"},"size":{"0":315,"1":106},"type":"PlaySound|pysssss","widgets_values":["always",0.5,"notify.mp3"]},{"flags":{},"id":75,"inputs":[{"label":"model","link":155,"name":"model","type":"MODEL"},{"label":"clip","link":96,"name":"clip","type":"CLIP"},{"label":"lora_stack","link":154,"name":"lora_stack","type":"LORA_STACK"}],"mode":0,"order":47,"outputs":[{"label":"MODEL","links":[97],"name":"MODEL","shape":3,"slot_index":0,"type":"MODEL"},{"label":"CLIP","links":[98],"name":"CLIP","shape":3,"slot_index":1,"type":"CLIP"},{"label":"show_help","links":null,"name":"show_help","shape":3,"type":"STRING"}],"pos":[2390,120],"properties":{"Node name for S&R":"CR Apply LoRA Stack"},"size":{"0":254.40000915527344,"1":66},"type":"CR Apply LoRA Stack"},{"flags":{},"id":74,"inputs":[{"label":"lora_stack","link":null,"name":"lora_stack","type":"LORA_STACK"}],"mode":0,"order":28,"outputs":[{"label":"LORA_STACK","links":[154],"name":"LORA_STACK","shape":3,"slot_index":0,"type":"LORA_STACK"},{"label":"show_help","links":null,"name":"show_help","shape":3,"type":"STRING"}],"pos":[2100,280],"properties":{"Node name for S&R":"CR LoRA Stack"},"size":{"0":315,"1":342},"type":"CR LoRA Stack","widgets_values":["Off","None",1,1,"Off","None",1,1,"Off","None",1,1]},{"bgcolor":"#653","color":"#432","flags":{},"id":144,"mode":0,"order":29,"pos":[5709.617980802812,870.6565219065052],"properties":{"text":""},"size":{"0":227.8234405517578,"1":131.7802276611328},"type":"Note","widgets_values":["always double check the ouptut of wdtagger/moondream when using supir as it's easy to get lazy and accidently inputting an incorrect prpmt by mistake!"]},{"flags":{},"id":138,"inputs":[{"label":"images","link":148,"name":"images","type":"IMAGE"}],"mode":0,"order":68,"pos":[8747,67],"properties":{"Node name for S&R":"SaveImage"},"size":{"0":267.9124755859375,"1":274.015869140625},"type":"SaveImage","widgets_values":["SPR_cfgstart%SPIR.cfg_scale_start%_ctrlstart%SPIR.control_scale_start%"]},{"flags":{},"id":36,"inputs":[{"label":"image","link":68,"name":"image","type":"IMAGE"}],"mode":4,"order":64,"outputs":[{"label":"IMAGE","links":[142,157],"name":"IMAGE","shape":3,"slot_index":0,"type":"IMAGE"},{"label":"show_help","links":null,"name":"show_help","shape":3,"type":"STRING"}],"pos":[7833.310524530062,116.41061913894603],"properties":{"Node name for S&R":"CR Simple Text Watermark"},"size":{"0":360,"1":300},"type":"CR Simple Text Watermark","widgets_values":["SUPIR","bottom right",0.3,"AlumniSansCollegiateOne-Regular.ttf",50,"custom",20,20,"#000000"]},{"flags":{},"id":146,"inputs":[{"label":"images","link":157,"name":"images","type":"IMAGE"}],"mode":0,"order":66,"pos":[7936,495],"properties":{"Node name for S&R":"PreviewImage"},"size":{"0":210,"1":246},"type":"PreviewImage"},{"flags":{},"id":145,"inputs":[{"label":"images","link":156,"name":"images","type":"IMAGE"}],"mode":0,"order":49,"pos":[7853,1214],"properties":{"Node name for S&R":"PreviewImage"},"size":{"0":210,"1":246},"type":"PreviewImage"},{"flags":{},"id":130,"inputs":[{"label":"image","link":142,"name":"image","type":"IMAGE"}],"mode":0,"order":65,"outputs":[{"label":"IMAGE","links":[143,148,151],"name":"IMAGE","shape":3,"slot_index":0,"type":"IMAGE"}],"pos":[8290,100],"properties":{"Node name for S&R":"Image Resize"},"size":{"0":315,"1":178},"type":"Image Resize","widgets_values":["rescale","true","lanczos",3,1024,1536]},{"flags":{},"id":132,"inputs":[{"label":"image","link":144,"name":"image","type":"IMAGE"}],"mode":0,"order":46,"outputs":[{"label":"STRING","links":[146],"name":"STRING","shape":6,"slot_index":0,"type":"STRING"}],"pos":[2129,732],"properties":{"Node name for S&R":"WD14Tagger|pysssss"},"size":{"0":430,"1":330},"type":"WD14Tagger|pysssss","widgets_values":["wd-v1-4-moat-tagger-v2",0.35,0.85,false,false,"","1girl, solo, long_hair, looking_at_viewer, smile, open_mouth, bangs, black_hair, thighhighs, dress, animal_ears, twintails, jewelry, standing, earrings, cat_ears, chibi, white_dress, fake_animal_ears, stuffed_toy, cat, bandaid, hoop_earrings, bandaid_on_face"]},{"flags":{},"id":102,"inputs":[{"label":"SUPIR_model","link":121,"name":"SUPIR_model","type":"SUPIRMODEL"},{"label":"latents","link":130,"name":"latents","type":"LATENT"},{"label":"positive","link":122,"name":"positive","type":"SUPIR_cond_pos"},{"label":"negative","link":123,"name":"negative","type":"SUPIR_cond_neg"}],"mode":0,"order":50,"outputs":[{"label":"latent","links":[127],"name":"latent","shape":3,"slot_index":0,"type":"LATENT"}],"pos":[6523.310524530062,526.4106191389457],"properties":{"Node name for S&R":"SUPIR_sample"},"size":{"0":315,"1":454},"type":"SUPIR_sample","widgets_values":[778,"fixed",40,2,2,5,1,1,0.93,0.98,10,false,"RestoreDPMPP2MSampler",1024,512]},{"bgcolor":"#653","color":"#432","flags":{},"id":6,"mode":0,"order":30,"pos":[150,-170],"properties":{"text":""},"size":{"0":770,"1":1110},"type":"Note","widgets_values":["               _              ___   ____\n __ _________ (_)_ ____ _    / _ | /  _/\n/ // / __(_-</ / // /  ' \\_ / __ |_/ /  \n\\_,_/_/ /___/_/\\_,_/_/_/_(_)_/ |_/___/  \n                                        \n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@(,%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..  ..,,*/(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&(....   ,*/#(%&&&&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@\n@@@@@@@@@@@@@@@@@@@@@@@&&&&%%%%#.   .. **((*,*(###%%%%%%&&&&@@@@@@@@@@@@@@@@@@@@\n@@@@@@@@@@@@@@@@@@@&&&&%%%###((((#//,,,*/,.%%@////(((###%%%%&&&&@@@@@@@@@@@@@@@@\n@@@@@@@@@@@@@@@@&&&%%%###((//***.&&@@#(#/&@@@@.,,,***//((###%%%&&&&@@@@@@@@@@@@@\n@@@@@@@@@@@@@@&&&%%%##((/**,,...  @%(/*((&@@&     ..,,**//((###%%%&&&@@@@@@@@@@@\n@@@@@@@@@@@@&&&%%##((//*,,.         &,.//%&          ..,,**//((##%%%&&&@@@@@@@@@\n@@@@@@@@@@@&&%%%#((//*,..           ,,/#@/              ..,**//((##%%%&&&@@@@@@@\n@@@@@@@@@&&&%%##((/*,,.             .&%@#@                ..,**//((##%%%&&@@@@@@\n@@@@@@@@&&&%%##((/*,,.             **/@@@@@                ..,,**/((##%%%&&@@@@@\n@@@@@@@@&&%%##((/*,,.         .. * ,.,@@@@@@@@&&            ..,,**/((##%%%&&@@@@\n@@@@@@@&&&%%##(//*,..       ..**@@&%.//,/@@@@@@@@&           ..,,**/((##%%&&&@@@\n@@@@@@@&&&%%#((/**,..      ./%&.   .,**,*/(#%@@@@&%          ...,**//(##%%&&&@@@\n@@@@@@@&&&%%##(//*,,.      (#% /...,.*/,,////*  .&&          ..,,**/((##%%&&@@@@\n@@@@@@@@&&%%%#((//*,..     ,*   ,*/(((%/(%&@&.    ,/.       ..,,**/((##%%&&@@@@@\n@@@@@@@@@&&%%%##(//*,,.. ..,    ..**,*/*/((@@,     */,    ..,,**//((##%%&&&@@@@@\n@@@@@@@@@@&&&%%##((//**..*..    .,/**%//@##%&      .,(*...,,**//((##%%%&&@@@@@@@\n\n\n** SUPIR v2 nodes WORKFLOW BY URSIUM.AI **\nCC-BY LICENSE - creativecommons.org/licenses/by/4.0/\nChannel/Tutorials: youtube.com/@stephantual\nDonations: ko-fi.com/stephantual\nTry it now: flowt.ai/community?search=%3Apub+Stephan_Tual\nAuthor: Stephan Tual\nDate Updated: 03/28/2024\nVersion: 1.6.1 FLOWT.AI PUBLIC RELEASE _ Update 2\n\n** HISTORY **\n03/14/2024 - Releasing the workflow while recording the tutorial video\n03/19/2024 - Updated post YouTube Video\n03/28/2024 - Updated to support the recent update\n03/29/2024 - Deployed on Flowt.AI Plug&Play and updated to support the 'red car' example\n04/05/2024 - Added WDtagger so no one forgets their pos prompts. Please read the notes and watch the video on 'settings'\n04/13/2024 - Updated for new video - check out my YT channel :)\n\n\n** NOW RUNNING ON CLOUD!!! **\nThank you to flowt.ai for supporting this updated version at:\nhttps://flowt.ai/community/supir-v2-plugandplay-edition-n5acf-v\nThe cloud is a good option if you lack vRAM, flowt has a 'plug and play' system that makes it really easy!\n\n\n** PURPOSE **\nA basic SUPIR worfklow supporting the latest update to keep up with the Jones.\nJoin our discord at tinyurl.com/URSIUM for showing of your work or sharing improved version of this workflow.\n\n\n** SUPPORT **\nIf you experience an issue, first:\na) Rewatch the latest video: I cover most of the error messages\nb) Run quick google search on the error message itself, works 99% of the time\nc) Check the SUPIR nodes Github and post an issue.\nRemember: I am not the author of the nodes. In addition, even they are rarely the authors of the underlying algorythms: most nodes are 'wrapping' code that may have bugs which neither myself nor the node authors can help with. You need to contact the correct person.\nd) If all fails consider running this on the cloud, I test it regularly to make sure it's stable (see above links)\n\n\n** DISCLAIMER **\nThis worfklow is provided 'AS IS' and is not supported in ANY way by the author. I am not responsible if the installation of custom nodes breaks your comfyUI install, or for anything for that matter. Each node used here is the property of their respective author - and they may contain non-commercial clauses. \n\n\n** USAGE ** \n0. Watch the tuturial video(s) posted on my YT channel (https://www.youtube.com/@stephantual)\n1. Choose a photo - refer to the video for advice on settings for now please :)\n2. Select an appropriate checkpoint for the model - anime for anime, photorealistic for photos etc.\n3. Select a scale factor - the higher, the more vRam this will use\n4. Run the stage 1 to check if you are happy with the model upscale - change the upscale model accordingly\n5. Once happy, set the SUPIR sampler settings to default and run\n6. Iterate until you have the results you want (creative, strict, etc)\n7. Experiment! this is to learn, not an \"app\" :)\n\n\nDiscuss at tinyurl.com/URSIUM or for the Flowt version, tinyurl.com/flowtai\nRun at: https://flowt.ai/community?search=%3Apub+Stephan_Tual\n\n\n"]},{"flags":{},"id":13,"mode":0,"order":31,"outputs":[{"label":"IMAGE","links":[28,85,131,144],"name":"IMAGE","shape":3,"slot_index":0,"type":"IMAGE"},{"label":"MASK","links":null,"name":"MASK","shape":3,"type":"MASK"}],"pos":[1288.3329726197876,1520.8095975227388],"properties":{"Node name for S&R":"LoadImage"},"size":{"0":702,"1":990},"type":"LoadImage","widgets_values":["editor/ComfyUI_temp_bdjzq_00002_.png","image"]},{"bgcolor":"#653","color":"#432","flags":{},"id":77,"mode":0,"order":32,"pos":[1558.3329726197876,1020.8095975227393],"properties":{"text":""},"size":{"0":400,"1":130},"type":"Note","widgets_values":["Chooose the correct model from openmodeldb.info based on your input, for example a face, a car or nature will all need a specific model. 4xLSDIRplusN, realesrgan or 4xNMKD-siax-200k are good all rounders, lexicaDAT is also really good while remacri can work well with nature. For best results use realistic and large (in terms of file size) models, not tiny hyper optimized ones.\nBypass if you find this to be detrimental to the quality of the image, which is going to be OFTEN :) "]},{"bgcolor":"#653","color":"#432","flags":{},"id":124,"mode":0,"order":33,"pos":[2342,1931],"properties":{"text":""},"size":{"0":331.14410400390625,"1":244.3267059326172},"type":"Note","widgets_values":["For the \"red car\" example, the upscale factor is 1 to demonstrate the functionality of SUPIR. The upscale is done at the back of the chain rather than the front in this case. For other use case, use either this upscale, or both.\n\nTurn on FP8 pass 5k, it will run out of 24gb vRam otherwise\n\nPast 6x SUPIR will definitely behave differently, which will be detrimental sometimes to the quality of the image. If you want extremely high resolutions, consider using supir up to 5x, then again using a standard lanczos for up to 10k resolution"]},{"flags":{"collapsed":false},"id":65,"mode":0,"order":34,"outputs":[{"label":"SUPIRVAE","links":[124],"name":"SUPIRVAE","slot_index":0,"type":"SUPIRVAE"}],"pos":[6323.310524530062,76.41061913894602],"properties":{},"size":{"0":309.68927001953125,"1":58.23038101196289},"title":"Get_SUPIR_VAE_DENOISED","type":"GetNode","widgets_values":["SUPIR_VAE_DENOISED"]},{"bgcolor":"#653","color":"#432","flags":{},"id":131,"mode":0,"order":35,"pos":[8300,350],"properties":{"text":""},"size":{"0":349.6351318359375,"1":58},"type":"Note","widgets_values":["Remember: this lanczos image resize node are VERY RAM (not vRAM) hungry."]},{"bgcolor":"#653","color":"#432","flags":{},"id":143,"mode":0,"order":36,"pos":[3715,1149],"properties":{"text":""},"size":{"0":449.2965087890625,"1":86.77743530273438},"type":"Note","widgets_values":["depending on your browser smoothing algorythm, if you're not using a model, you will NOT (AT ALL) see results from lanczos only here, this is normal. Use icat or faststone to compare images"]},{"flags":{},"id":147,"mode":0,"order":37,"outputs":[{"label":"FLOAT","links":[158,159],"name":"FLOAT","shape":3,"slot_index":0,"type":"FLOAT"}],"pos":[2346,1833],"properties":{"Node name for S&R":"JWFloat"},"size":{"0":315,"1":58},"title":"Scale Factor","type":"JWFloat","widgets_values":[2.1]},{"flags":{},"id":73,"inputs":[{"label":"model","link":97,"name":"model","type":"MODEL"},{"label":"clip","link":98,"name":"clip","type":"CLIP"},{"label":"vae","link":92,"name":"vae","type":"VAE"}],"mode":0,"order":54,"outputs":[{"label":"SUPIR_model","links":[93],"name":"SUPIR_model","shape":3,"slot_index":0,"type":"SUPIRMODEL"},{"label":"SUPIR_VAE","links":[102],"name":"SUPIR_VAE","shape":3,"slot_index":1,"type":"SUPIRVAE"}],"pos":[2658,91],"properties":{"Node name for S&R":"SUPIR_model_loader_v2"},"size":{"0":315,"1":146},"type":"SUPIR_model_loader_v2","widgets_values":["Kijai/SUPIR_pruned/SUPIR-v0Q_fp16.safetensors",false,"auto"]},{"flags":{},"id":24,"mode":4,"order":39,"outputs":[{"label":"UPSCALE_MODEL","links":[27],"name":"UPSCALE_MODEL","shape":3,"slot_index":0,"type":"UPSCALE_MODEL"}],"pos":[1558.3329726197876,1210.8095975227388],"properties":{"Node name for S&R":"UpscaleModelLoader"},"size":{"0":440,"1":140},"type":"UpscaleModelLoader","widgets_values":["4xLexicaDAT2_otf.pth"]},{"flags":{},"id":72,"mode":0,"order":38,"outputs":[{"label":"MODEL","links":[155],"name":"MODEL","shape":3,"slot_index":0,"type":"MODEL"},{"label":"CLIP","links":[96],"name":"CLIP","shape":3,"slot_index":1,"type":"CLIP"},{"label":"VAE","links":[92],"name":"VAE","shape":3,"slot_index":2,"type":"VAE"}],"pos":[1318.3329726197876,130.80959752273912],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"size":{"0":780,"1":120},"type":"CheckpointLoaderSimple","widgets_values":["misri/leosamsHelloworldXL_helloworldXL50GPT4V/leosamsHelloworldXL_helloworldXL50GPT4V.safetensors"]}],"version":0.4,"viewport":{"scale":0.3138428376721006,"x":-762.7160034179688,"y":-145.9618682861328}}